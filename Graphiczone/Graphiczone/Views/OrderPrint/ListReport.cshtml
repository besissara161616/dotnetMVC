
@{
    ViewData["Title"] = "ListReport";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h1>รายงาน</h1>
<hr class="bg-secondary" />


<div class="row">
    <div class="col-md-12">
        <form>
            <div class="form-group">
                <div class="row" style="margin-bottom:5px">
                    <div class="col-md-6">
                        <label>ตั้งแต่ : </label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="CID"><i class="far fa-calendar-check text-success" id="CID"></i></span>
                            </div>
                            <input class="form-control" type="date" id="datestart" name="datestart">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label>ถึง : </label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="CID"><i class="fas fa-calendar-check text-danger" id="CID"></i></span>
                            </div>
                            <input class="form-control" type="date" id="dateend" name="dateend">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row" style="margin-bottom:5px">
                    <div class="col-md-3">

                    </div>
                    <div class="col-md-3">

                    </div>
                    <div class="col-md-3">

                    </div>
                    <div class="col-md-3">

                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row" style="margin-bottom:5px">
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="service" value="1" />
                        <label>บริการ</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="allincome" value="2" />
                        <label>รายได้ทั้งหมด</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="paid" value="3" />
                        <label>รายได้ที่ลูกค้าชำระเงินแล้ว</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="overdue" value="4" />
                        <label>รายได้ที่ลูกค้าค้างชำระ</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="working" value="5" />
                        <label>กำลังผลิตอยู่</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="workdone" value="6" />
                        <label>ผลิตเสร็จแล้ว</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="shipping" value="7" />
                        <label>กำลังจัดส่ง</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="shippingfinish" value="8" />
                        <label>จัดส่งเสร็จแล้ว</label>
                    </div>
                    <div class="col-md-3">
                        <input class="btn badge-pill" type="radio" name="typereport" id="user" value="9" />
                        <label>พนักงาน</label>
                    </div>
                </div>
            </div>
        </form>
        <button class="btn btn-outline-primary badge-pill" onclick="searchreport()">ดูรายงาน</button>
    </div>
</div>

<script>
    var radvalue = 0;
    function searchreport() {
        checktype();
        var datestart = document.getElementById("datestart").value;
        var dateend = document.getElementById("dateend").value;
        $.ajax({
            type: "post",
            data: { radvalue, datestart, dateend },
            url: "/OrderPrint/Report",
            success: function (result) {
                if (result == 0) {
                    alert("0");
                }else if (result == 1) {
                    window.open('@Url.Action("ReportService","OrderPrint")')
                }else if (result == 2) {
                    window.open('@Url.Action("ReportAllincome","OrderPrint")')
                }else if (result == 3) {
                    window.open('@Url.Action("ReportPaid", "OrderPrint")')
                }else if (result == 4) {
                    window.open('@Url.Action("ReportOverdue", "OrderPrint")')
                } @*else if (result == 5) {
                    window.open('@Url.Action("Reportworking","OrderPrint")')
                } else if (result == 6) {
                    window.open('@Url.Action("Reportworkdone","OrderPrint")')
                }*@else if (result == 9) {
                    window.open('@Url.Action("ReportUser", "OrderPrint")')
                }
            }
        })
    }

    function checktype() {
        var service = document.getElementById("service");
        var allincome = document.getElementById("allincome");
        var paid = document.getElementById("paid");
        var overdue = document.getElementById("overdue");
        var working = document.getElementById("working");
        var success = document.getElementById("workdone");
        var user = document.getElementById("user");
        if (service.checked == true) {
            radvalue = 1;
        }else if (allincome.checked == true) {
            radvalue = 2;
        } else if (paid.checked == true) {
            radvalue = 3;
        } else if (overdue.checked == true) {
            radvalue = 4;
        }
        //else if (working.checked == true) {
        //    radvalue = 5;
        //} else if (success.checked == true) {
        //    radvalue = 6;
        //}
        else if (user.checked == true) {
            radvalue = 9;
        }
    }
</script>